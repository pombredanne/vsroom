# -*- coding: utf-8 -*-
from abusehelper.core import bot, events
from abusehelper.contrib.rssbot.rssbot import RSSBot

types = [u'\xf6ljyvahinko /ymp\xe4rist\xf6onnettomuus maalla', u'rakennuspalo',
         u'paloh\xe4lytys', u'tieliikenneonnettomuus', u'vahingontorjunta',
         u'ihmisen pelastaminen puristuksista', u'maastopalo',
         u'el\xe4inteht\xe4v\xe4t', u'tulipalo muu', u'ihmisen pelastaminen']

severities = {"pieni":"00 Small", "keskisuuri":"01 Medium", "suuri":"02 Big"}

municipalities = {u'Akaa': [u'61.169000', u'23.858000'],
                  u'Alaj\xe4rvi': [u'63.000000', u'23.817000'],
                  u'Alavieska': [u'64.167000', u'24.300000'],
                  u'Alavus': [u'62.583000', u'23.617000'],
                  u'Asikkala': [u'61.173000', u'25.549000'],
                  u'Askola': [u'60.530000', u'25.599000'],
                  u'Aura': [u'60.646000', u'22.577000'],
                  u'Br\xe4nd\xf6': [u'60.413000', u'21.047000'],
                  u'Ecker\xf6': [u'60.213000', u'19.614000'],
                  u'Enonkoski': [u'62.083000', u'28.933000'],
                  u'Enonteki\xf6': [u'68.383000', u'23.633000'],
                  u'Espoo': [u'60.209000', u'24.658000'],
                  u'Eura': [u'61.133000', u'22.133000'],
                  u'Eurajoki': [u'61.200000', u'21.733000'],
                  u'Evij\xe4rvi': [u'63.367000', u'23.483000'],
                  u'Finstr\xf6m': [u'60.228000', u'19.995000'],
                  u'Forssa': [u'60.819000', u'23.621000'],
                  u'F\xf6gl\xf6': [u'60.030000', u'20.392000'],
                  u'Geta': [u'60.383000', u'19.850000'],
                  u'Haapaj\xe4rvi': [u'63.752000', u'25.329000'],
                  u'Haapavesi': [u'64.145000', u'25.377000'],
                  u'Hailuoto': [u'65.010000', u'24.715000'],
                  u'Halsua': [u'63.467000', u'24.167000'],
                  u'Hamina': [u'60.564000', u'27.201000'],
                  u'Hammarland': [u'60.217000', u'19.750000'],
                  u'Hankasalmi': [u'62.385000', u'26.431000'],
                  u'Hanko': [u'59.833000', u'22.950000'],
                  u'Harjavalta': [u'61.316000', u'22.135000'],
                  u'Hartola': [u'61.583000', u'26.018000'],
                  u'Hattula': [u'61.067000', u'24.383000'],
                  u'Haukipudas': [u'65.183000', u'25.350000'],
                  u'Hausj\xe4rvi': [u'60.783000', u'25.000000'],
                  u'Heinola': [u'61.205000', u'26.040000'],
                  u'Hein\xe4vesi': [u'62.433000', u'28.600000'],
                  u'Helsinki': [u'60.170000', u'24.931000'],
                  u'Hirvensalmi': [u'61.642000', u'26.788000'],
                  u'Hollola': [u'60.987000', u'25.537000'],
                  u'Honkajoki': [u'61.983000', u'22.267000'],
                  u'Huittinen': [u'61.178000', u'22.689000'],
                  u'Humppila': [u'60.933000', u'23.367000'],
                  u'Hyrynsalmi': [u'64.677000', u'28.510000'],
                  u'Hyvink\xe4\xe4': [u'60.633000', u'24.876000'],
                  u'H\xe4meenkoski': [u'61.030000', u'25.157000'],
                  u'H\xe4meenkyr\xf6': [u'61.633000', u'23.200000'],
                  u'H\xe4meenlinna': [u'61.000000', u'24.450000'],
                  u'Ii': [u'65.317000', u'25.367000'],
                  u'Iisalmi': [u'63.567000', u'27.183000'],
                  u'Iitti': [u'60.890000', u'26.350000'],
                  u'Ikaalinen': [u'61.772000', u'23.067000'],
                  u'Ilmajoki': [u'62.732000', u'22.578000'],
                  u'Ilomantsi': [u'62.667000', u'30.917000'],
                  u'Imatra': [u'61.190000', u'28.774000'],
                  u'Inari': [u'68.900000', u'27.017000'],
                  u'Inkoo': [u'60.050000', u'24.017000'],
                  u'Isojoki': [u'62.117000', u'21.967000'],
                  u'Isokyr\xf6': [u'63.000000', u'22.317000'],
                  u'Jalasj\xe4rvi': [u'62.490000', u'22.764000'],
                  u'Janakkala': [u'60.900000', u'24.600000'],
                  u'Joensuu': [u'62.600000', u'29.767000'],
                  u'Jokioinen': [u'60.803000', u'23.483000'],
                  u'Jomala': [u'60.155000', u'19.958000'],
                  u'Joroinen': [u'62.183000', u'27.833000'],
                  u'Joutsa': [u'61.748000', u'26.129000'],
                  u'Juankoski': [u'63.064000', u'28.320000'],
                  u'Juuka': [u'63.246000', u'29.251000'],
                  u'Juupajoki': [u'61.783000', u'24.450000'],
                  u'Juva': [u'61.899000', u'27.863000'],
                  u'Jyv\xe4skyl\xe4': [u'62.233000', u'25.733000'],
                  u'J\xe4mij\xe4rvi': [u'61.817000', u'22.700000'],
                  u'J\xe4ms\xe4': [u'61.867000', u'25.200000'],
                  u'J\xe4rvenp\xe4\xe4': [u'60.478000', u'25.083000'],
                  u'Kaarina': [u'60.391000', u'22.376000'],
                  u'Kaavi': [u'62.976000', u'28.483000'],
                  u'Kajaani': [u'64.233000', u'27.683000'],
                  u'Kalajoki': [u'64.250000', u'23.950000'],
                  u'Kangasala': [u'61.463000', u'24.076000'],
                  u'Kangasniemi': [u'61.983000', u'26.633000'],
                  u'Kankaanp\xe4\xe4': [u'61.803000', u'22.390000'],
                  u'Kannonkoski': [u'62.967000', u'25.250000'],
                  u'Kannus': [u'63.904000', u'23.896000'],
                  u'Karijoki': [u'62.300000', u'21.700000'],
                  u'Karjalohja': [u'60.250000', u'23.717000'],
                  u'Karkkila': [u'60.532000', u'24.219000'],
                  u'Karstula': [u'62.867000', u'24.783000'],
                  u'Karvia': [u'62.133000', u'22.567000'],
                  u'Kaskinen': [u'62.376000', u'21.231000'],
                  u'Kauhajoki': [u'62.424000', u'22.170000'],
                  u'Kauhava': [u'63.100000', u'23.083000'],
                  u'Kauniainen': [u'60.212000', u'24.726000'],
                  u'Kaustinen': [u'63.533000', u'23.700000'],
                  u'Keitele': [u'63.183000', u'26.367000'],
                  u'Kemi': [u'65.733000', u'24.567000'],
                  u'Kemij\xe4rvi': [u'66.719000', u'27.425000'],
                  u'Keminmaa': [u'65.817000', u'24.533000'],
                  u'Kemi\xf6nsaari': [u'60.163889,', u'22.727778'],
                  u'Kempele': [u'64.917000', u'25.500000'],
                  u'Kerava': [u'60.400000', u'25.117000'],
                  u'Kerim\xe4ki': [u'61.917000', u'29.283000'],
                  u'Kes\xe4lahti': [u'61.893000', u'29.834000'],
                  u'Keuruu': [u'62.257000', u'24.706000'],
                  u'Kihni\xf6': [u'62.200000', u'23.183000'],
                  u'Kiikoinen': [u'61.450000', u'22.583000'],
                  u'Kiiminki': [u'65.133000', u'25.733000'],
                  u'Kinnula': [u'63.370000', u'24.970000'],
                  u'Kirkkonummi': [u'60.117000', u'24.433000'],
                  u'Kitee': [u'62.100000', u'30.150000'],
                  u'Kittil\xe4': [u'67.651000', u'24.903000'],
                  u'Kiuruvesi': [u'63.650000', u'26.617000'],
                  u'Kivij\xe4rvi': [u'60.967000', u'21.883000'],
                  u'Kokem\xe4ki': [u'61.250000', u'22.350000'],
                  u'Kokkola': [u'63.844000', u'23.128000'],
                  u'Kolari': [u'67.331000', u'23.788000'],
                  u'Konnevesi': [u'62.617000', u'26.317000'],
                  u'Kontiolahti': [u'62.767000', u'29.850000'],
                  u'Korsn\xe4s': [u'60.167000', u'21.833000'],
                  u'Koski Tl': [u'60.654167,', u'23.140278'],
                  u'Kotka': [u'60.460000', u'26.946000'],
                  u'Kouvola': [u'60.867000', u'26.700000'],
                  u'Kristiinankaupunki': [u'62.277000', u'21.358000'],
                  u'Kruunupyy': [u'63.717000', u'23.033000'],
                  u'Kuhmo': [u'64.125000', u'29.511000'],
                  u'Kuhmoinen': [u'61.567000', u'25.183000'],
                  u'Kumlinge': [u'60.261000', u'20.779000'],
                  u'Kuopio': [u'62.900000', u'27.683000'],
                  u'Kuortane': [u'62.800000', u'23.500000'],
                  u'Kurikka': [u'62.617000', u'22.417000'],
                  u'Kustavi': [u'60.550000', u'21.350000'],
                  u'Kuusamo': [u'65.967000', u'29.183000'],
                  u'Kyyj\xe4rvi': [u'63.033000', u'24.567000'],
                  u'K\xe4rk\xf6l\xe4': [u'60.872000', u'25.269000'],
                  u'K\xe4rs\xe4m\xe4ki': [u'63.980000', u'25.755000'],
                  u'K\xf6kar': [u'59.933000', u'20.883000'],
                  u'K\xf6yli\xf6': [u'61.117000', u'22.350000'],
                  u'Lahti': [u'60.981000', u'25.655000'],
                  u'Laihia': [u'62.967000', u'22.017000'],
                  u'Laitila': [u'60.880000', u'21.689000'],
                  u'Lapinj\xe4rvi': [u'60.633000', u'26.217000'],
                  u'Lapinlahti': [u'63.366000', u'27.392000'],
                  u'Lappaj\xe4rvi': [u'63.200000', u'23.633000'],
                  u'Lappeenranta': [u'61.056000', u'28.189000'],
                  u'Lapua': [u'62.960000', u'23.030000'],
                  u'Laukaa': [u'62.419000', u'25.953000'],
                  u'Lavia': [u'61.598000', u'22.593000'],
                  u'Lemi': [u'61.050000', u'27.800000'],
                  u'Lemland': [u'60.071000', u'20.085000'],
                  u'Lemp\xe4\xe4l\xe4': [u'61.317000', u'23.750000'],
                  u'Lepp\xe4virta': [u'62.483000', u'27.783000'],
                  u'Lestij\xe4rvi': [u'63.533000', u'24.650000'],
                  u'Lieksa': [u'63.317000', u'30.017000'],
                  u'Lieto': [u'60.507000', u'22.451000'],
                  u'Liminka': [u'64.817000', u'25.400000'],
                  u'Liperi': [u'62.533000', u'29.367000'],
                  u'Lohja': [u'60.250000', u'24.083000'],
                  u'Loimaa': [u'60.851000', u'23.043000'],
                  u'Loppi': [u'60.713000', u'24.438000'],
                  u'Loviisa': [u'60.456000', u'26.222000'],
                  u'Luhanka': [u'61.783000', u'25.700000'],
                  u'Lumijoki': [u'64.840000', u'25.190000'],
                  u'Lumparland': [u'60.120000', u'20.264000'],
                  u'Luoto': [u'63.751000', u'22.745000'],
                  u'Luum\xe4ki': [u'60.911000', u'27.568000'],
                  u'Luvia': [u'61.365000', u'21.618000'],
                  u'L\xe4nsi-Turunmaa': [u'60.3,', u'22.3'],
                  u'Maalahti': [u'62.933000', u'21.567000'],
                  u'Maaninka': [u'63.157000', u'27.304000'],
                  u'Maarianhamina': [u'60.100000', u'19.950000'],
                  u'Marttila': [u'60.817000', u'25.383000'],
                  u'Masku': [u'60.567000', u'22.100000'],
                  u'Merij\xe4rvi': [u'63.700000', u'23.183000'],
                  u'Merikarvia': [u'61.863000', u'21.507000'],
                  u'Miehikk\xe4l\xe4': [u'60.667000', u'27.700000'],
                  u'Mikkeli': [u'61.683000', u'27.250000'],
                  u'Muhos': [u'64.809000', u'25.991000'],
                  u'Multia': [u'62.414000', u'24.801000'],
                  u'Muonio': [u'67.958000', u'23.679000'],
                  u'Mustasaari': [u'63.117000', u'21.717000'],
                  u'Muurame': [u'62.133000', u'25.667000'],
                  u'Myn\xe4m\xe4ki': [u'60.678000', u'21.990000'],
                  u'Myrskyl\xe4': [u'60.667000', u'25.850000'],
                  u'M\xe4nts\xe4l\xe4': [u'60.633000', u'25.317000'],
                  u'M\xe4ntt\xe4-Vilppula': [u'62.033333,', u'24.616667'],
                  u'M\xe4ntyharju': [u'61.417000', u'26.877000'],
                  u'Naantali': [u'60.465000', u'22.019000'],
                  u'Nakkila': [u'61.367000', u'22.000000'],
                  u'Nastola': [u'60.944000', u'25.937000'],
                  u'Nilsi\xe4': [u'63.212000', u'28.060000'],
                  u'Nivala': [u'63.923000', u'24.958000'],
                  u'Nokia': [u'61.467000', u'23.500000'],
                  u'Nousiainen': [u'60.590000', u'22.080000'],
                  u'Nummi-Pusula': [u'60.397000', u'23.893000'],
                  u'Nurmes': [u'63.544000', u'29.145000'],
                  u'Nurmij\xe4rvi': [u'60.467000', u'24.800000'],
                  u'N\xe4rpi\xf6': [u'62.474000', u'21.336000'],
                  u'Orimattila': [u'60.800000', u'25.736000'],
                  u'Orip\xe4\xe4': [u'60.850000', u'22.683000'],
                  u'Orivesi': [u'61.677000', u'24.363000'],
                  u'Oulainen': [u'64.269000', u'24.818000'],
                  u'Oulu': [u'65.017000', u'25.467000'],
                  u'Oulunsalo': [u'64.933000', u'25.417000'],
                  u'Outokumpu': [u'62.727000', u'29.038000'],
                  u'Padasjoki': [u'61.350000', u'25.283000'],
                  u'Paimio': [u'60.456000', u'22.687000'],
                  u'Paltamo': [u'64.417000', u'27.833000'],
                  u'Parikkala': [u'61.550000', u'29.500000'],
                  u'Parkano': [u'62.017000', u'23.017000'],
                  u'Peders\xf6ren kunta': [u'63.6,', u'22.794444'],
                  u'Pelkosenniemi': [u'67.111000', u'27.511000'],
                  u'Pello': [u'66.796000', u'24.000000'],
                  u'Perho': [u'63.217000', u'24.417000'],
                  u'Pertunmaa': [u'61.500000', u'26.483000'],
                  u'Pet\xe4j\xe4vesi': [u'62.255000', u'25.190000'],
                  u'Pieks\xe4m\xe4ki': [u'62.300000', u'27.133000'],
                  u'Pielavesi': [u'63.235000', u'26.758000'],
                  u'Pietarsaari': [u'63.677000', u'22.706000'],
                  u'Pihtipudas': [u'63.376000', u'25.575000'],
                  u'Pirkkala': [u'61.467000', u'23.626000'],
                  u'Polvij\xe4rvi': [u'62.857000', u'29.376000'],
                  u'Pomarkku': [u'61.698000', u'22.003000'],
                  u'Pori': [u'61.483000', u'21.783000'],
                  u'Pornainen': [u'60.481000', u'25.363000'],
                  u'Porvoo': [u'60.398000', u'25.669000'],
                  u'Posio': [u'66.110000', u'28.179000'],
                  u'Pudasj\xe4rvi': [u'65.367000', u'27.001000'],
                  u'Pukkila': [u'60.650000', u'25.600000'],
                  u'Punkaharju': [u'61.752000', u'29.393000'],
                  u'Punkalaidun': [u'61.117000', u'23.100000'],
                  u'Puolanka': [u'64.872000', u'27.660000'],
                  u'Puumala': [u'61.526000', u'28.184000'],
                  u'Pyht\xe4\xe4': [u'60.483000', u'26.533000'],
                  u'Pyh\xe4joki': [u'64.470000', u'24.268000'],
                  u'Pyh\xe4j\xe4rvi': [u'63.682000', u'25.970000'],
                  u'Pyh\xe4nt\xe4': [u'64.102000', u'26.356000'],
                  u'Pyh\xe4ranta': [u'60.951000', u'21.447000'],
                  u'P\xe4lk\xe4ne': [u'61.333000', u'24.280000'],
                  u'P\xf6yty\xe4': [u'60.710000', u'22.610000'],
                  u'Raahe': [u'64.677000', u'24.459000'],
                  u'Raasepori': [u'59.975', u'23.436111'],
                  u'Raisio': [u'60.483000', u'22.183000'],
                  u'Rantasalmi': [u'62.067000', u'28.300000'],
                  u'Ranua': [u'65.930000', u'26.510000'],
                  u'Rauma': [u'61.134000', u'21.505000'],
                  u'Rautalampi': [u'62.633000', u'26.833000'],
                  u'Rautavaara': [u'63.483000', u'28.300000'],
                  u'Rautj\xe4rvi': [u'61.431000', u'29.350000'],
                  u'Reisj\xe4rvi': [u'63.610000', u'24.934000'],
                  u'Riihim\xe4ki': [u'60.739000', u'24.774000'],
                  u'Ristiina': [u'61.507000', u'27.266000'],
                  u'Ristij\xe4rvi': [u'64.507000', u'28.201000'],
                  u'Rovaniemi': [u'66.500000', u'25.717000'],
                  u'Ruokolahti': [u'61.294000', u'28.832000'],
                  u'Ruovesi': [u'61.983000', u'24.083000'],
                  u'Rusko': [u'60.533000', u'22.217000'],
                  u'R\xe4\xe4kkyl\xe4': [u'62.317000', u'29.617000'],
                  u'Saarij\xe4rvi': [u'62.708000', u'25.247000'],
                  u'Salla': [u'66.833000', u'28.667000'],
                  u'Salo': [u'60.383000', u'23.133000'],
                  u'Saltvik': [u'60.283000', u'20.050000'],
                  u'Sastamala': [u'61.341667', u'22.908333'],
                  u'Sauvo': [u'60.346000', u'22.690000'],
                  u'Savitaipale': [u'61.195000', u'27.684000'],
                  u'Savonlinna': [u'61.867000', u'28.883000'],
                  u'Savukoski': [u'67.292000', u'28.158000'],
                  u'Sein\xe4joki': [u'62.798000', u'22.832000'],
                  u'Sievi': [u'63.909000', u'24.515000'],
                  u'Siikainen': [u'61.867000', u'21.833000'],
                  u'Siikajoki': [u'64.833000', u'24.733000'],
                  u'Siikalatva': [u'64.266667', u'25.866667'],
                  u'Siilinj\xe4rvi': [u'63.074000', u'27.665000'],
                  u'Simo': [u'65.667000', u'25.050000'],
                  u'Sipoo': [u'60.367000', u'25.267000'],
                  u'Siuntio': [u'60.183000', u'24.200000'],
                  u'Sodankyl\xe4': [u'67.417000', u'26.599000'],
                  u'Soini': [u'62.872000', u'24.214000'],
                  u'Somero': [u'60.617000', u'23.533000'],
                  u'Sonkaj\xe4rvi': [u'63.667000', u'27.517000'],
                  u'Sotkamo': [u'64.133000', u'28.417000'],
                  u'Sottunga': [u'60.128000', u'20.668000'],
                  u'Sulkava': [u'61.790000', u'28.364000'],
                  u'Sund': [u'60.250000', u'20.116000'],
                  u'Suomenniemi': [u'61.317000', u'27.450000'],
                  u'Suomussalmi': [u'64.883000', u'28.900000'],
                  u'Suonenjoki': [u'62.631000', u'27.113000'],
                  u'Sysm\xe4': [u'61.506000', u'25.673000'],
                  u'S\xe4kyl\xe4': [u'61.054000', u'22.338000'],
                  u'Taipalsaari': [u'61.150000', u'28.050000'],
                  u'Taivalkoski': [u'65.573000', u'28.233000'],
                  u'Taivassalo': [u'60.563000', u'21.618000'],
                  u'Tammela': [u'60.809000', u'23.767000'],
                  u'Tampere': [u'61.500000', u'23.750000'],
                  u'Tarvasjoki': [u'60.583000', u'22.733000'],
                  u'Tervo': [u'62.950000', u'26.750000'],
                  u'Tervola': [u'66.084000', u'24.811000'],
                  u'Teuva': [u'62.483000', u'21.733000'],
                  u'Tohmaj\xe4rvi': [u'62.226000', u'30.333000'],
                  u'Toholampi': [u'63.778000', u'24.246000'],
                  u'Toivakka': [u'62.100000', u'26.083000'],
                  u'Tornio': [u'65.850000', u'24.183000'],
                  u'Turku': [u'60.459000', u'22.250000'],
                  u'Tuusniemi': [u'62.817000', u'28.500000'],
                  u'Tuusula': [u'60.407000', u'25.036000'],
                  u'Tyrn\xe4v\xe4': [u'64.767000', u'25.650000'],
                  u'T\xf6ys\xe4': [u'62.633000', u'23.817000'],
                  u'Ulvila': [u'61.433000', u'21.883000'],
                  u'Urjala': [u'61.083000', u'23.533000'],
                  u'Utaj\xe4rvi': [u'64.761000', u'26.413000'],
                  u'Utsjoki': [u'69.910000', u'27.018000'],
                  u'Uurainen': [u'62.500000', u'25.450000'],
                  u'Uusikaarlepyy': [u'63.523000', u'22.528000'],
                  u'Uusikaupunki': [u'60.801000', u'21.411000'],
                  u'Vaala': [u'64.561000', u'26.831000'],
                  u'Vaasa': [u'63.100000', u'21.600000'],
                  u'Valkeakoski': [u'61.267000', u'24.033000'],
                  u'Valtimo': [u'63.685000', u'28.812000'],
                  u'Vantaa': [u'60.285000', u'25.050000'],
                  u'Varkaus': [u'62.317000', u'27.917000'],
                  u'Vehmaa': [u'60.680000', u'21.664000'],
                  u'Vesanto': [u'62.933000', u'26.417000'],
                  u'Vesilahti': [u'61.317000', u'23.617000'],
                  u'Veteli': [u'63.467000', u'23.767000'],
                  u'Vierem\xe4': [u'63.747000', u'27.005000'],
                  u'Vihanti': [u'64.487000', u'24.980000'],
                  u'Vihti': [u'60.417000', u'24.333000'],
                  u'Viitasaari': [u'63.086000', u'25.866000'],
                  u'Vimpeli': [u'63.160000', u'23.850000'],
                  u'Virolahti': [u'60.584000', u'27.706000'],
                  u'Virrat': [u'62.270000', u'23.700000'],
                  u'V\xe4h\xe4kyr\xf6': [u'63.067000', u'22.100000'],
                  u'V\xe5rd\xf6': [u'60.242000', u'20.378000'],
                  u'V\xf6yri': [u'63.131944', u'22.252778'],
                  u'Yli-Ii': [u'65.371000', u'25.834000'],
                  u'Ylitornio': [u'66.321000', u'23.673000'],
                  u'Ylivieska': [u'64.083000', u'24.550000'],
                  u'Yl\xf6j\xe4rvi': [u'61.560000', u'23.582000'],
                  u'Yp\xe4j\xe4': [u'60.804000', u'23.280000'],
                  u'\xc4ht\xe4ri': [u'62.556000', u'24.096000'],
                  u'\xc4\xe4nekoski': [u'62.600000', u'25.729000']}

class Info112Bot(RSSBot):
    feeds = bot.ListParam(default=["http://www.peto-media.fi/tiedotteet/rss.xml"])

    def create_event(self, **keys):
        description = keys.get("description", None)
        title = keys.get("title", None)
        if None in [description, title]:
            return None

        event = events.Event()
        event.add("feed", "112Info")

        url = keys.get("source", None)
        if url:
            event.add("source", url)

        date = " ".join(description.split()[:2])
        event.add("date", date)

        location = title.split(",")[0].split("/")[0]
        event.add("location", location)

        latitude, longitude = municipalities.get(location, (None, None))
        if latitude and longitude:
            event.add("latitude", latitude)
            event.add("longitude", longitude)

        definition = title.split(",")[1].strip()
        event.add("description", definition)

        for event_type in types:
            if definition.startswith(event_type):
                event.add("type", event_type)
                break

        for severity in severities:
            if definition.endswith(" %s" % severity):
                event.add("severity", severities[severity])
                break

        return event

if __name__ == "__main__":
    Info112Bot.from_command_line().run()

